# 멀티스레드와 비동기 I/O


```
  한 프로세스 내에 여러가개의 스레드가 존재한다고 가정한다. 프로세스 내에서 파일을 읽어올 떄 스레드1번은 하드디스크(2차 메모리)에서 파일을 읽어온다.    
  해당 스레드가 하드디스크에서 파일을 읽어오는데 걸리는 시간은 파일의 크기에 영향을 받는다. [파일의 크기가 크다면 한번에 파일을 읽어와 메모리에 저장하지 않도록 한다.(예측가능한 크기로)]   
  스레드2번은 스레드1번이 가져온 데이터(파일)를 처리한다. 스레드3번은 소켓을 열어서 송신을 한다.  
```

```
  멀티스레딩환경에서 동기화는 중요하다. 동기화를 위해 자료구조 queue를 사용한다.   
  1번스레드가 파일을 읽어와 큐에 저장하면 2번스레드는 루프를 계속돌면서 해당 큐에 2번스레드가 처리할 데이터가 있는지 감시한다.
  2번스레드가 3번스레드에 데이터를 보낼때도 큐를 사용한다. 3번스레드도 2번스레드와 같이 해당 큐에 처리할 데이터가 있는지 감시한다.
  주의해야할 점이 있는데, 1번스레드는 큐에 데이터를 저장하는 역할을하고 2번스레드는 큐에서 데이터를 꺼내와 사용하는 역할을 하는데   
  이 행위가 동시에 일어날경우 데이터의 손상이 발생할 수 있다. 이러한 상황을 방지하기위해 lock을 이용한다.
  스레드는 각자의 역할을 한다. 1번스레드는 파일을 읽어오는 역할만, 2번스레드는 해당 파일의 데이터를 가지고 어떠한 행위를,   
  3번스레드는 또 다른 행위만을 하는것이 바람직하다.
```




##### 출처[참고]: 널널한 개발자 youtube 중
