# JPA
* * *
blog: [프로젝트 생성](https://cronex.tistory.com/m/23)
* * *
### 2023-04-07[금]
- [update](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/update/update.md)
- [remove](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/remove/remove.md)
- [annotation](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/Entity_mapping/Annotation.md)
- [auto](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/Entity_mapping/auto.md)
- [스키마옵션](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/Entity_mapping/schema_options.md)
- [기본 키 ](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/Entity_mapping/%EA%B8%B0%EB%B3%B8%ED%82%A4_%EB%A7%A4%ED%95%91.md)
* * *
### 2023-04-09 [일]
- [필드와 컬럼매핑](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/Entity_mapping/%ED%95%84%EB%93%9C%EC%99%80%EC%BB%AC%EB%9F%BC%EB%A7%A4%ED%95%91.md)
- [양방향 연관관계](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84_%EB%A7%A4%ED%95%91%EA%B8%B0%EC%B4%88/%EC%96%91%EB%B0%A9%ED%96%A5_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84.md)
* * *
### 2023-04-11 [화]
- [양방향 연관관계 주의](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84_%EB%A7%A4%ED%95%91%EA%B8%B0%EC%B4%88/%EC%96%91%EB%B0%A9%ED%96%A5_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84_%EC%A3%BC%EC%9D%98.md)
- [양방향 연관관계](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84_%EB%A7%A4%ED%95%91%EA%B8%B0%EC%B4%88/%EC%96%91%EB%B0%A9%ED%96%A5_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84.md)
* * *
### 2023-04-12 [수]
- [다대다](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EB%8B%A4%EC%96%91%ED%95%9C_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/%EB%8B%A4%EB%8C%80%EB%8B%A4.md)
- [다대일](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EB%8B%A4%EC%96%91%ED%95%9C_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/%EB%8B%A4%EB%8C%80%EC%9D%BC.md)
- [일대다](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EB%8B%A4%EC%96%91%ED%95%9C_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/%EC%9D%BC%EB%8C%80%EB%8B%A4.md)
- [일대일](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EB%8B%A4%EC%96%91%ED%95%9C_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84/%EC%9D%BC%EB%8C%80%EC%9D%BC.md)
- [상속관계 매핑](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EA%B3%A0%EA%B8%89%EB%A7%A4%ED%95%91/%EC%83%81%EC%86%8D%EA%B4%80%EA%B3%84_%EB%A7%A4%ED%95%91.md)
- [mapped superclass](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EA%B3%A0%EA%B8%89%EB%A7%A4%ED%95%91/Mapped_superclass.md)
* * *
### 2023-04-13 [목]
- [즉시로딩_지연로딩](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%ED%94%84%EB%A1%9D%EC%8B%9C%EC%99%80_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84_%EA%B4%80%EB%A6%AC/%EC%A6%89%EC%8B%9C%EB%A1%9C%EB%94%A9_%EC%A7%80%EC%97%B0%EB%A1%9C%EB%94%A9.md)
- [영속성전이(cascade)와 고아객체](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%ED%94%84%EB%A1%9D%EC%8B%9C%EC%99%80_%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84_%EA%B4%80%EB%A6%AC/%EC%98%81%EC%86%8D%EC%84%B1%EC%A0%84%EC%9D%B4(CASCADE)%EC%99%80_%EA%B3%A0%EC%95%84%EA%B0%9D%EC%B2%B4.md)
- [기본값 타입](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EA%B0%92_%ED%83%80%EC%9E%85/%EA%B8%B0%EB%B3%B8%EA%B0%92_%ED%83%80%EC%9E%85.md)
- [임베디드 타입](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EA%B0%92_%ED%83%80%EC%9E%85/%EC%9E%84%EB%B2%A0%EB%94%94%EB%93%9C_%ED%83%80%EC%9E%85.md)
* * *
### 2023-05-06 [토]
-[x_to_one_mapping](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/API%EA%B0%9C%EB%B0%9C%EA%B3%BC_%EC%84%B1%EB%8A%A5_%EC%B5%9C%EC%A0%81%ED%99%94/x_to_one_mapping.md)
* * *
### 2023-05-21 [일]
- [메소드 이름으로 쿼리생성](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%EB%A9%94%EC%86%8C%EB%93%9C_%EC%9D%B4%EB%A6%84%EC%9C%BC%EB%A1%9C_%EC%BF%BC%EB%A6%AC_%EC%83%9D%EC%84%B1.md) [spring-data-jpa에서 메서드 명을 이용한 쿼리생성]
- [NamedQuery](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/JPA_NameedQuery.md)
- [@NamedQuery entity에 쿼리를 미리 생성해두고 repo에서 사용하는 방식 em.createNamedQuery, 또는 @Query(name= "") 정적쿼리]
- [@Query,리포지토리 메서드에 쿼리 정의하기](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%40Query_%EB%A0%88%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C%EC%97%90_%EC%BF%BC%EB%A6%AC_%EC%A0%95%EC%9D%98%ED%95%98%EA%B8%B0.md) [정적쿼리, 이 전 NamedQuery 처럼 repository method 위에 @Query를 사용하되, name이 아닌 query 를 사용한다.]
- [@Query, 값 DTO 조회하기](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%40Query_%EA%B0%92_DTO_%EC%A1%B0%ED%9A%8C%ED%95%98%EA%B8%B0.md) [@Query를 이용해 필요한 column이나, DTO를 이용하여 조회하는 방법]
- [파라미터 바인딩](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0_%EB%B0%94%EC%9D%B8%EB%94%A9.md) [파라미터 바인딩에는 위치기반과, 이름기반이 존재하며, 주로 이름기반을 써야하며, collection 파라미터를 이용한 조회도 가능하다.]
* * *
### 2023-05-22 [월]
- [반환 타입](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%EB%B0%98%ED%99%98_%ED%83%80%EC%9E%85.md) [spring-data-jpa를 사용하면 repository에서 여러가지 반환타입을 사용할 수 있다. Optional'<'T'>', T, Collection'<'T'>' ...  [find..by[prorperty name] 으로 ]]
* * *      
### 2023-05-24 [수]
- [순수 JPA 페이징과 정렬](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%EC%88%9C%EC%88%98_JPA_%ED%8E%98%EC%9D%B4%EC%A7%95%EA%B3%BC_%EC%A0%95%EB%A0%AC.md) [JPQL을 이용한 페이징과 정렬 조회조건과, setFirstResult, setMaxResults 사용]
* * *
### 2023-05-27 [토]
- [스프링 데이터 JPA 페이징과 정렬](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA_%ED%8E%98%EC%9D%B4%EC%A7%95%EA%B3%BC_%EC%A0%95%EB%A0%AC.md) [spring-data jpa에서 제공하는 paging 관련 package들, page, slice, list return 값을 갖고, paging에 관한 정보를 얻을 수 있다. 페이징에서 totalcount의 성능이 나오지 않을 때는 직접 작성을 권장]
* * *
### 2023-05-28 [일]
- [벌크성 수정 쿼리](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%EB%B2%8C%ED%81%AC%EC%84%B1_%EC%88%98%EC%A0%95_%EC%BF%BC%EB%A6%AC.md) [jpa에서 벌크 쿼리는 JPQL과 함께 executeUpdate()를 호출한다. 반환값은 업데이트된 로우 수 | spring-data-jpa에서는 @Query에 JQPL를 작성하고, @Modifying 어노테이션을 추가해준다. 벌크연산은 영속성 컨텍스트와는 별개로 직접 쿼리를 날리기 때문에 영속성 컨텍스트를 초기화해주기 위해 @Mondifying option으로 clearAutomatically = true를 추가해준다.]
- [@EntityGraph](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/%40EntityGraph.md)[JPQL의 fetch join를 spring-data-jpa에서 @EntityGraph으로 제공한다. option으로 attributePaths = {} 에 fetch join할 property를 작성한다. // NamedQuey 처럼 NamedEntityGraph를 제공한다. ]
- [JPA_HINT_AND_LOCK](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%BF%BC%EB%A6%AC_%EB%A9%94%EC%86%8C%EB%93%9C_%EA%B8%B0%EB%8A%A5/JPA_Hint%26Lock.md)[spring-data-jpa에서 사용하기 쉽게 JPA에서 제공하는 hint [jpa쿼리 힌트] 나 @Lock을 제공한다. Lock은 중요한 로직(돈과 관련된 등등..)에 사용 ]
- [Auditing](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%ED%99%95%EC%9E%A5_%EA%B8%B0%EB%8A%A5/Auditing.md)[spring-data-jpa에서 기본적으로 테이블에 들어가는 등록일, 수정일, 등록자, 수정자에 대한 것을 제공 중요하게, EntityListeners(AuditingEntiotyListener.class), @MappedSuperClass 사용, 및 등록자, 수정자를 위한 bean 생성 ]
- [도메인 클래스 컨버터](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%ED%99%95%EC%9E%A5_%EA%B8%B0%EB%8A%A5/Web_%ED%99%95%EC%9E%A5-%EB%8F%84%EB%A9%94%EC%9D%B8_%ED%81%B4%EB%9E%98%EC%8A%A4_%EC%BB%A8%EB%B2%84%ED%84%B0.md) [controller에서 pathvariable로 값을 받을 때 long이 아닌 entity를 받게되면 select를 실행한것과 같이 pathvariable로 받은 entityId값으로 조회를 하여 member에 set한다. 이것은 트랜잭션 밖에서 일어났기 때문에, 간단한 조회용으로 사용하기 좋음. 권장하지는 않는다. ]
- [web 확장 페이징과 정렬](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%ED%99%95%EC%9E%A5_%EA%B8%B0%EB%8A%A5/Web_%ED%99%95%EC%9E%A5-%ED%8E%98%EC%9D%B4%EC%A7%95%EA%B3%BC%EC%A0%95%EB%A0%AC.md)[controller에서 페이징을 간단하게 사용할 수 있는 법 인자로 Pageable를 받아서 findAll에 인자로 전달. 기본적으로 page=0 size 20, 설정 변경 가능 ]
- [spring-data-jpa 구현체 분석](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA_%EB%B6%84%EC%84%9D/%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA_%EA%B5%AC%ED%98%84%EC%B2%B4_%EB%B6%84%EC%84%9D.md)
* * * 
### 2023-05-29 [월]
- [새로운 엔티티를 구별하는 방법](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA_%EB%B6%84%EC%84%9D/%EC%83%88%EB%A1%9C%EC%9A%B4_%EC%97%94%ED%8B%B0%ED%8B%B0%EB%A5%BC_%EA%B5%AC%EB%B3%84%ED%95%98%EB%8A%94_%EB%B0%A9%EB%B2%95.md)[spring-data-jpa의 save는 merge와 persitt를 사용하는데, @GeneratedValue가 아닌 채번테이블이나 직접 엔티티아이디를 부여하는 경우 merge를 타게 되는데, 이를 해결하기 위해 entity에 Persistable을 구현한다. ]
* * *
### 2023-06-01 [목]
- [projections](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EB%82%98%EB%A8%B8%EC%A7%80_%EA%B8%B0%EB%8A%A5%EB%93%A4/Projections.md) [open projection = interface에 get...() method를 정의하여 사용 | SPEL을 사용하여 interface에 정의한 메소드 위체 @Value를 사용하여 toString()와 같이 정의할 수 있다.  | class 기반 porjection 1뎁스만 최적화가 되는 단점이 있지만, class의 생성자를 통해 interface와 같이 사용할 수 있다. 주의해야 할 점은 생성자의 인자와 매칭하므로 인자로 받는 property명을 매칭해서 사용할 것. | 동적 projection open projection의 반환값으로 제네릭을 선언하고, 인자로 Class'<'T'>'를 받아서 동적으로 반환값을 설정할 수 있다. ]
* * *
### 2023-06-03 [토]
-[네이티브 쿼리](https://github.com/xxx-sj/Today_I_Learned/blob/master/JPA/java_orm_programming/%EC%8B%A4%EC%A0%84!%EC%8A%A4%ED%94%84%EB%A7%81_%EB%8D%B0%EC%9D%B4%ED%84%B0_JPA/%EB%82%98%EB%A8%B8%EC%A7%80_%EA%B8%B0%EB%8A%A5%EB%93%A4/%EB%84%A4%EC%9D%B4%ED%8B%B0%EB%B8%8C%EC%BF%BC%EB%A6%AC.md) [되도록 쓰지 않는 것이 좋고, native query보다는 mybatis나 jdbc template 권장. @Query 옵션으로 nativeQuery = true 를 추가해서 작성 가능. 주로 projection과 함께 사용한다.]
